(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{188:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return d}));var n=a(0),r=a.n(n);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=r.a.createContext({}),o=function(e){var t=r.a.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},s=function(e){var t=o(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,c=e.parentName,p=b(e,["components","mdxType","originalType","parentName"]),s=o(a),u=n,d=s["".concat(c,".").concat(u)]||s[u]||m[u]||i;return a?r.a.createElement(d,l(l({ref:t},p),{},{components:a})):r.a.createElement(d,l({ref:t},p))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,c=new Array(i);c[0]=u;var l={};for(var b in t)hasOwnProperty.call(t,b)&&(l[b]=t[b]);l.originalType=e,l.mdxType="string"==typeof e?e:n,c[1]=l;for(var p=2;p<i;p++)c[p]=a[p];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"},93:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return c})),a.d(t,"metadata",(function(){return l})),a.d(t,"rightToc",(function(){return b})),a.d(t,"default",(function(){return o}));var n=a(2),r=a(6),i=(a(0),a(188)),c={id:"match-details",title:"Match details"},l={unversionedId:"match-details",id:"match-details",isDocsHomePage:!1,title:"Match details",description:"When using [pattern()->match()] and [pattern()->replace->callback()], some methods receive a callback that accepts [Detail]",source:"@site/../docs/match-details.md",slug:"/match-details",permalink:"/docs/match-details",version:"current",lastUpdatedAt:1611615683,sidebar:"docs",previous:{title:"Map with keys (Flat map)",permalink:"/docs/match-flat-map"},next:{title:"Capturing groups",permalink:"/docs/match-groups"}},b=[{value:"Overview",id:"overview",children:[]},{value:"Matched text",id:"matched-text",children:[]},{value:"Integers",id:"integers",children:[]},{value:"Subject",id:"subject",children:[]},{value:"Ordinal value (index)",id:"ordinal-value-index",children:[]},{value:"Limit",id:"limit",children:[]},{value:"Offsets",id:"offsets",children:[]},{value:"Tail",id:"tail",children:[]},{value:"Other occurrences",id:"other-occurrences",children:[]},{value:"Groups",id:"groups",children:[]},{value:"User data",id:"user-data",children:[]}],p={rightToc:b};function o(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(n.a)({},p,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"When using ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/match"}),Object(i.b)("inlineCode",{parentName:"a"},"pattern()->match()"))," and ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/replace-callback"}),Object(i.b)("inlineCode",{parentName:"a"},"pattern()->replace->callback()")),", some methods receive a callback that accepts ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/match-details"}),Object(i.b)("inlineCode",{parentName:"a"},"Detail")),"\ndetails object. These methods are: ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/match-first"}),Object(i.b)("inlineCode",{parentName:"a"},"first()")),", ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/match-find-first"}),Object(i.b)("inlineCode",{parentName:"a"},"findFirst()")),", ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/match-for-each"}),Object(i.b)("inlineCode",{parentName:"a"},"forEach()")),", ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/match-map"}),Object(i.b)("inlineCode",{parentName:"a"},"map()")),", ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/match-flat-map"}),Object(i.b)("inlineCode",{parentName:"a"},"flatMap()")),", ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/replace-callback"}),Object(i.b)("inlineCode",{parentName:"a"},"callback()")),"."),Object(i.b)("p",null,"The details can be used to get concise information about the matched occurrence, such as its value\n(i.e. ",Object(i.b)("inlineCode",{parentName:"p"},'"the whole match"'),"), capturing groups and their UTF-8/raw offsets, limits, indexes, other matches as well as the\nused subject (although it could also be pass as a closure parameter) and more."),Object(i.b)("p",null,"For example, to read the offset at which the occurrence was matched, use ",Object(i.b)("inlineCode",{parentName:"p"},"Detail.offset()"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php",metastring:"{4}","{4}":!0}),"pattern('[A-Z][a-z]+')->match('I like Trains')->first(fn(Detail $detail) => $detail->offset());\n")),Object(i.b)("h2",{id:"overview"},"Overview"),Object(i.b)("p",null,"Using ",Object(i.b)("inlineCode",{parentName:"p"},"Detail")," details, you gain access to:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"#matched-text"}),Object(i.b)("inlineCode",{parentName:"a"},"text()"))," - value of a matched occurrence"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"#integers"}),Object(i.b)("inlineCode",{parentName:"a"},"toInt()")),"/",Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"#integers"}),Object(i.b)("inlineCode",{parentName:"a"},"isInt()"))," which allow you to handle integers safely"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"#subject"}),Object(i.b)("inlineCode",{parentName:"a"},"subject()"))," - subject against which the pattern was matched"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"#ordinal-value-index"}),Object(i.b)("inlineCode",{parentName:"a"},"index()"))," - ordinal value of a matched occurrence"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"#limit"}),Object(i.b)("inlineCode",{parentName:"a"},"limit()"))," - limit which was put on the matches"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"#offsets"}),"offsets of matched values")," in the subject (UTF-8 safe):",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"#offsets"}),Object(i.b)("inlineCode",{parentName:"a"},"offset()"))," - character offset"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"#tail"}),Object(i.b)("inlineCode",{parentName:"a"},"tail()"))," - tail (offset of the end of the string) "),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"#matched-text"}),Object(i.b)("inlineCode",{parentName:"a"},"textLength()"))," - length of the matched occurrence "))),Object(i.b)("li",{parentName:"ul"},"byte versions of the methods:",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"byteTextLength()")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"byteOffset()")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"byteTail()")))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"#other-occurrences"}),Object(i.b)("inlineCode",{parentName:"a"},"all()"))," - other matched occurrences"),Object(i.b)("li",{parentName:"ul"},"details about capturing groups, in the next chapter: ",Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/match-groups"}),"Capturing groups")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"#other-occurrences"}),"User data")," - sharing custom data between callbacks")),Object(i.b)("h2",{id:"matched-text"},"Matched text"),Object(i.b)("p",null,"There are 6 similar ways to get the value of the matched occurrence."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php",metastring:"{3-4,6-8}","{3-4,6-8}":!0}),"pattern('[A-Z][a-z]+')->match('I like Trains')->map(function (Detail $detail) {\n\n    return $detail->text();             // using text() method\n    return $detail->group(0)->text();   // group #0 is the whole match in all regexp engines\n\n    return (string) $detail;            // cast it to string\n    return (string) $detail->group(0);  // cast group #0 to string\n    return \"$detail\";                   // enclose it in double quotes\n});\n")),Object(i.b)("p",null,"or you can just accept ",Object(i.b)("inlineCode",{parentName:"p"},"string")," in the callback signature."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"pattern('[A-Z][a-z]+')->match('I like Trains')->map(function (string $match) {\n    return $match;\n});\n")),Object(i.b)("p",null,"All of them are redundant and equal to each other. Their redundancy comes from the fact the there are a few ways of\ncasting an object to string in PHP, casting ",Object(i.b)("inlineCode",{parentName:"p"},"Detail")," to string is the same as getting ",Object(i.b)("inlineCode",{parentName:"p"},"text()")," in T-Regx, and that the\nwhole match is also group ",Object(i.b)("inlineCode",{parentName:"p"},"0")," in regular expressions."),Object(i.b)("p",null,"There's also UTF8-safe method ",Object(i.b)("inlineCode",{parentName:"p"},"textLength()")," which, you guessed it, returns the length of a matched text."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"pattern('[A-Z][a-z]+')->match('I like Trains')->map(function (Detail $detail) {\n    return $detail->text();         // 'Trains'\n    return $detail->textLength();   // 6\n});\n")),Object(i.b)("h2",{id:"integers"},"Integers"),Object(i.b)("p",null,"Method ",Object(i.b)("inlineCode",{parentName:"p"},"isInt()")," returns ",Object(i.b)("inlineCode",{parentName:"p"},"true"),' if, and only if, the matched occurrence is numeric. And by "numeric", we mean "real" numeric,\nnot PHP numeric:'),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"String values considered valid integers: ",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"'14'"),", ",Object(i.b)("inlineCode",{parentName:"li"},"'-14'"),", ",Object(i.b)("inlineCode",{parentName:"li"},"'000'")," "))),Object(i.b)("li",{parentName:"ul"},"Strings that aren't treated as valid integers: ",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"'+14'"),", ",Object(i.b)("inlineCode",{parentName:"li"},"' 10'"),", ",Object(i.b)("inlineCode",{parentName:"li"},"'10 '"),", ",Object(i.b)("inlineCode",{parentName:"li"},"''"),", ",Object(i.b)("inlineCode",{parentName:"li"},"' '"),", ",Object(i.b)("inlineCode",{parentName:"li"},"'0.0'"),", ",Object(i.b)("inlineCode",{parentName:"li"},"'0,0'"),",")))),Object(i.b)("p",null,"The string is considered a valid integer if:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"contains only ",Object(i.b)("inlineCode",{parentName:"li"},"0-9")," characters, and more than 1 of them (so ",Object(i.b)("inlineCode",{parentName:"li"},"00")," is also a valid integer, but ",Object(i.b)("inlineCode",{parentName:"li"},"''")," isn't)"),Object(i.b)("li",{parentName:"ul"},"optionally starts with only one ",Object(i.b)("inlineCode",{parentName:"li"},"-")," sign"),Object(i.b)("li",{parentName:"ul"},"its numeric representation is:",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"higher than ",Object(i.b)("inlineCode",{parentName:"li"},"PHP_INT_MIN")," (-9223372036854775808)"),Object(i.b)("li",{parentName:"ul"},"lower than ",Object(i.b)("inlineCode",{parentName:"li"},"PHP_INT_MAX")," (9223372036854775807)"))),Object(i.b)("li",{parentName:"ul"},"doesn't contain any other characters")),Object(i.b)("h4",{id:"checking-and-parsing"},"Checking and parsing"),Object(i.b)("p",null,"There are two methods regarding integers: ",Object(i.b)("inlineCode",{parentName:"p"},"isInt()")," and ",Object(i.b)("inlineCode",{parentName:"p"},"toInt()"),"."),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"$detail->isInt()")," returns ",Object(i.b)("inlineCode",{parentName:"p"},"true"),"/",Object(i.b)("inlineCode",{parentName:"p"},"false")," depending on whether the matched occurrence is numeric. ",Object(i.b)("inlineCode",{parentName:"p"},"toInt()"),"\nreturns said numeric occurrence as an integer, or throws ",Object(i.b)("inlineCode",{parentName:"p"},"IntegerFormatException")," instead."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php",metastring:"{3}","{3}":!0}),"pattern('\\d+')->match('User input was: 4 times')->first(function (Detail $detail) {\n    if ($detail->isInt()) {\n        for ($i = 0; $i < $detail->toInt(); $i++) {\n            // tasks\n        }\n    }\n});\n")),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"It's implemented with ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.php.net/manual/en/function.filter-var.php"}),Object(i.b)("inlineCode",{parentName:"a"},"filter_var()")),", but you can think of it as ",Object(i.b)("inlineCode",{parentName:"p"},"/^-?\\d+$/")," with max/min values check."))),Object(i.b)("h2",{id:"subject"},"Subject"),Object(i.b)("p",null,"To get the subject in your callback, use ",Object(i.b)("inlineCode",{parentName:"p"},"Detail.subject()"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"pattern('[A-Z][a-z]+')->match('I like Trains')->map(fn(Detail $detail) => $detail->subject());\n")),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"'I like Trains'\n")),Object(i.b)("p",null,"This is equivalent to storing the subject in a variable and using it in your closure."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"$subject = 'I like Trains';\n\npattern('[A-Z][a-z]+')->match($subject)->map(fn(Detail $detail) => $subject);\n")),Object(i.b)("h2",{id:"ordinal-value-index"},"Ordinal value (index)"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"Detail.index()")," returns the ordinal number of a matched occurrence."),Object(i.b)("p",null,"In this example, we'll modify every second word:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php",metastring:"{2}","{2}":!0}),"pattern('\\w+')->match('I like Trains, but I also like bikes')->map(function (Detail $detail) {\n    if ($detail->index() % 2 === 0) {\n        return strtolower($detail);\n    }\n    return strtoupper($detail);\n});\n")),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"['i', 'LIKE', 'trains', 'BUT', 'i', 'ALSO', 'like', 'BIKES']\n")),Object(i.b)("h2",{id:"limit"},"Limit"),Object(i.b)("p",null,"Depending on whether you used ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/match#many"}),Object(i.b)("inlineCode",{parentName:"a"},"all()")),", ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/match-first"}),Object(i.b)("inlineCode",{parentName:"a"},"first()"))," or ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/match#many"}),Object(i.b)("inlineCode",{parentName:"a"},"only(int)"))," - method ",Object(i.b)("inlineCode",{parentName:"p"},"limit()")," will return ",Object(i.b)("inlineCode",{parentName:"p"},"-1"),", ",Object(i.b)("inlineCode",{parentName:"p"},"1")," or an\nargument given to ",Object(i.b)("inlineCode",{parentName:"p"},"only()")),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"pattern('\\w+')->replace($string)->all()->callback(function (Detail $detail) {\n    $detail->limit();   // -1\n});\n")),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"pattern('\\w+')->replace($string)->first()->callback(function (Detail $detail) {\n    $detail->limit();   // 1\n});\n")),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"pattern('\\w+')->replace($string)->only(5)->callback(function (Detail $detail) {\n    $detail->limit();   // 5\n});\n")),Object(i.b)("h2",{id:"offsets"},"Offsets"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"Detail.offset()")," can be used to get the offset of the matched occurrence in the subject. ",Object(i.b)("inlineCode",{parentName:"p"},"Detail.offset()")," is multi-byte\ncharacter safe and returns offset in characters, whereas ",Object(i.b)("inlineCode",{parentName:"p"},"Detail.byteOffset()")," returns the offset in bytes."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"pattern('here')->match('Apples for 0.30\u20ac, here')->first(function (Detail $detail) {\n    $characters = $detail->offset();   // 18\n    $byes = $detail->byteOffset();     // 20\n});\n")),Object(i.b)("p",null,"Here's what the numbers mean:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"Apples for 0.30\u20ac, here\n                  \u2191\n                  offset()\n")),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"A  p   p   l   e   s      f   o   r      0  .  3  0  \u20ac           ,     h   e   r   e\n65 112 112 108 101 115 32 102 111 114 32 48 46 51 48 226 130 172 44 32 104 101 114 101\n                                                                       \u2191\n                                                                       byteOffset()\n")),Object(i.b)("p",null,"In other words, ",Object(i.b)("inlineCode",{parentName:"p"},"offset()")," treats bytes ",Object(i.b)("inlineCode",{parentName:"p"},"[226, 130, 172]")," as one multi-byte character (euro sign ",Object(i.b)("inlineCode",{parentName:"p"},"\u20ac"),") and counts them as\none; whereas ",Object(i.b)("inlineCode",{parentName:"p"},"byteOffset()")," would count them as three."),Object(i.b)("p",null,"Use:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"offset()")," with functions: ",Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.php.net/manual/en/function.mb-substr.php"}),Object(i.b)("inlineCode",{parentName:"a"},"mb_substr()")),", ",Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.php.net/manual/en/function.mb-strpos.php"}),Object(i.b)("inlineCode",{parentName:"a"},"mb_strpos()"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"byteOffset()")," with functions: ",Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.php.net/manual/en/function.substr.php"}),Object(i.b)("inlineCode",{parentName:"a"},"substr()")),", ",Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.php.net/manual/en/function.strpos.php"}),Object(i.b)("inlineCode",{parentName:"a"},"strpos()")))),Object(i.b)("h2",{id:"tail"},"Tail"),Object(i.b)("p",null,"Method ",Object(i.b)("inlineCode",{parentName:"p"},"Detail.tail()")," simply returns the position of the last character in a matched occurrence."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"pattern('ipsum')->match('Lorem ipsum')->first(function (Detail $detail) {\n    $start = $detail->offset();   // 6\n    $end = $detail->tail();       // 11\n});\n")),Object(i.b)("p",null,"There's also ",Object(i.b)("inlineCode",{parentName:"p"},"Detail.byteTail()")," which returns the tail in bytes, instead of characters."),Object(i.b)("h2",{id:"other-occurrences"},"Other occurrences"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"Detail")," has access to other matched occurrences:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"Detail.all()")," - for whole matches (like ",Object(i.b)("inlineCode",{parentName:"li"},"Detail.text()"),")"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"Detail.group().all()")," - for capturing groups (like ",Object(i.b)("inlineCode",{parentName:"li"},"Detail.group().text()"),")")),Object(i.b)("p",null,"Even if you use ",Object(i.b)("inlineCode",{parentName:"p"},"first()")," or ",Object(i.b)("inlineCode",{parentName:"p"},"only(int)")," methods, ",Object(i.b)("inlineCode",{parentName:"p"},"Detail.all()")," always returns unlimited occurrences."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php",metastring:"{4}","{4}":!0}),"pattern('\\w+')->match('Apples are cool')->map(function (Detail $detail) {\n    return [\n        'match' => $detail->text(),\n        'all'   => $detail->all()\n    ];\n});\n")),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"[\n  ['match' => 'Apples', 'all' => ['Apples', 'are', 'cool']],\n  ['match' => 'are',    'all' => ['Apples', 'are', 'cool']],\n  ['match' => 'cool',   'all' => ['Apples', 'are', 'cool']]\n]\n")),Object(i.b)("h2",{id:"groups"},"Groups"),Object(i.b)("p",null,"With ",Object(i.b)("inlineCode",{parentName:"p"},"Detail.group(string|int)"),", you can easily retrieve capturing groups."),Object(i.b)("p",null,"Just like with ",Object(i.b)("inlineCode",{parentName:"p"},"Detail"),", retrieving matched occurrence value is done with ",Object(i.b)("inlineCode",{parentName:"p"},"text()")," method or by casting it to ",Object(i.b)("inlineCode",{parentName:"p"},"string"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php",metastring:"{5,7-8}","{5,7-8}":!0}),"$pattern = '(?<value>\\d+)(?<unit>cm|mm)';\n$subject = '192mm and 168cm or 18mm and 12cm';\n\npattern($pattern)->match($subject)->first(function (Detail $detail) {\n    $text = $detail->text();                            // '192mm'\n\n    $value = (string) $detail->group('value');          // '192'\n    $unit  =          $detail->group('unit')->text();   // 'mm'\n});\n")),Object(i.b)("p",null,"More about capturing groups can be found in the next section: ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/match-groups"}),"Capturing groups"),"."),Object(i.b)("h2",{id:"user-data"},"User data"),Object(i.b)("p",null,"To most users this functionality will occur as redundant - it's only use case are multiple calls to callbacks, for example\nwhen using chained ",Object(i.b)("inlineCode",{parentName:"p"},"filter()->map()"),". With user data, it's possible to perform an operation in ",Object(i.b)("inlineCode",{parentName:"p"},"filter()"),", store its\nvalue in user data, and then use the value in ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/match-map"}),Object(i.b)("inlineCode",{parentName:"a"},"map()"))," without reference closure variables."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php",metastring:"{4,8}","{4,8}":!0}),"pattern('\\w{2}')->match('Languages: en, de, xd, sv')\n    ->filter(function (Detail $detail) {\n        $languageInfo = HeavyService::fetch($detail->text());\n        $detail->setUserData($languageInfo);\n        return $languageInfo->isValid();\n    })\n    ->map(function (Detail $detail) {\n        $languageInfo = $detail->getUserData();\n        return $languageInfo->languages():\n    });\n")))}o.isMDXComponent=!0}}]);