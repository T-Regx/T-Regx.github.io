(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{128:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return l})),a.d(t,"rightToc",(function(){return c})),a.d(t,"default",(function(){return o}));var n=a(1),r=(a(0),a(204));const i={id:"prepared-patterns-in-details",title:"Prepared Patterns in details"},l={id:"prepared-patterns-in-details",title:"Prepared Patterns in details",description:"## Details about `Pattern::prepare()`",source:"@site/../docs/prepared-patterns-in-details.md",permalink:"/docs/prepared-patterns-in-details",lastUpdatedAt:1582037579,sidebar:"docs",previous:{title:"Advanced replace details",permalink:"/docs/replace-match-details"}},c=[{value:"Details about <code>Pattern::prepare()</code>",id:"details-about-patternprepare",children:[{value:"Additional information",id:"additional-information",children:[]}]},{value:"Details about <code>Pattern::inject()</code>",id:"details-about-patterninject",children:[{value:"Ignored placeholders",id:"ignored-placeholders",children:[]},{value:"Additional information",id:"additional-information-1",children:[]}]},{value:"Building process",id:"building-process",children:[]}],b={rightToc:c};function o({components:e,...t}){return Object(r.b)("wrapper",Object(n.a)({},b,t,{components:e,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"details-about-patternprepare"},"Details about ",Object(r.b)("inlineCode",{parentName:"h2"},"Pattern::prepare()")),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Pattern::prepare()")," accepts your pattern as an array. Said array can contain either:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"string")," - which means it will be interpreted as a regular expression"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"array")," - it's enclosed values will be treated as string literals.")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"Pattern::prepare([\"(My|Our)\", ' ',  \"(dog|cat)'s name is \", [$dog], ' and ', [$cat], '!']);\n")),Object(r.b)("p",null,"The code above means:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Treat ",Object(r.b)("inlineCode",{parentName:"li"},'"(My|Our)"')," as a regular expression"),Object(r.b)("li",{parentName:"ul"},"Treat ",Object(r.b)("inlineCode",{parentName:"li"},"' '")," as a regular expression"),Object(r.b)("li",{parentName:"ul"},"Treat ",Object(r.b)("inlineCode",{parentName:"li"},'"(dog|cat)\'s name is "')," as a regular expression"),Object(r.b)("li",{parentName:"ul"},"Treat value of ",Object(r.b)("inlineCode",{parentName:"li"},"$dog")," as a string literal"),Object(r.b)("li",{parentName:"ul"},"Treat ",Object(r.b)("inlineCode",{parentName:"li"},"' and '")," as a regular expression"),Object(r.b)("li",{parentName:"ul"},"Treat value of ",Object(r.b)("inlineCode",{parentName:"li"},"$cat")," as a string literal"),Object(r.b)("li",{parentName:"ul"},"Treat ",Object(r.b)("inlineCode",{parentName:"li"},"'!'")," as a regular expression")),Object(r.b)("p",null,"You can also group elements inside the inner array and also split regular expressions at will:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"Pattern::prepare([\"(My|Our) (dog|cat)'s name is \", [$dog, ' and ', $cat], '!']);\n")),Object(r.b)("p",null,"Both code snippets are equal (but now ",Object(r.b)("inlineCode",{parentName:"p"},"' and '")," is also a string literal)."),Object(r.b)("h3",{id:"additional-information"},"Additional information"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Array structure:",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"Keys in the arrays (both outer and inner arrays) don't matter, as far as T-Regx is concerned"),Object(r.b)("li",{parentName:"ul"},"The only important factors are:",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"string values"),Object(r.b)("li",{parentName:"ul"},"order of the values inside the array"))))),Object(r.b)("li",{parentName:"ul"},"Data types:",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"The outer array can only consist of ",Object(r.b)("inlineCode",{parentName:"li"},"string")," or an inner array"),Object(r.b)("li",{parentName:"ul"},"The inner array can only consist of ",Object(r.b)("inlineCode",{parentName:"li"},"string")),Object(r.b)("li",{parentName:"ul"},"Any other values cause ",Object(r.b)("inlineCode",{parentName:"li"},"InvalidArgumentException")))),Object(r.b)("li",{parentName:"ul"},"Values inside the inner array:",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"don't contribute")," to the pattern being automatically delimited. Otherwise, user-input data could influence the pattern being invalid or not"),Object(r.b)("li",{parentName:"ul"},"are always quoted (using ",Object(r.b)("inlineCode",{parentName:"li"},"preg::quote()"),") with regard to the delimiter chosen by ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/delimiters"}),"Automatic Delimiters"))))),Object(r.b)("h2",{id:"details-about-patterninject"},"Details about ",Object(r.b)("inlineCode",{parentName:"h2"},"Pattern::inject()")),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Pattern::inject()")," replaces a ",Object(r.b)("strong",{parentName:"p"},"placeholder")," in the pattern with values treated as string literals."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"Pattern::inject(\"(My|Our) (dog|cat)'s name is @dog and @cat!\", [\n    'dog' => $dog,\n    'cat' => $cat\n]);\n")),Object(r.b)("p",null,"The said code snippet with ",Object(r.b)("inlineCode",{parentName:"p"},"Pattern::inject()")," is exactly the same as the one with ",Object(r.b)("inlineCode",{parentName:"p"},"Pattern::prepare()")," above."),Object(r.b)("p",null,"Apart from ",Object(r.b)("inlineCode",{parentName:"p"},"@name")," placeholder format, you can also use ",Object(r.b)("code",null,"`","name","`")," format. So, again, the code snippet below\nworks exactly the same as the two snippets above."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"Pattern::inject(\"(My|Our) (dog|cat)'s name is `dog` and `cat`!\", [\n    'dog' => $dog,\n    'cat' => $cat\n]);\n")),Object(r.b)("h3",{id:"ignored-placeholders"},"Ignored placeholders"),Object(r.b)("p",null,"If you'd like to use a placeholder format inside your ",Object(r.b)("inlineCode",{parentName:"p"},"Pattern::inject()"),", but ",Object(r.b)("strong",{parentName:"p"},"not")," replace it with a quoted value,\nyou can ignore it."),Object(r.b)("p",null,"Ignoring a placeholder is done by passing it's name without a replacement:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"Pattern::inject(\"(My|Our) (dog|cat)'s name is @dog and @cat!\", [\n    'dog' => $dog,\n    'cat'               // @cat will not be replaced\n]);\n")),Object(r.b)("p",null,"You can, of course, pass a name and it's corresponding value:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"Pattern::inject(\"(My|Our) (dog|cat)'s name is `dog` and `cat`!\", [\n    'dog' => $dog,\n    'cat' => '`cat`'    // `cat` will be replaced with `cat`\n]);\n")),Object(r.b)("p",null,"but you need to specify which placeholder format was used: ",Object(r.b)("code",null,"`","cat","`")," or ",Object(r.b)("inlineCode",{parentName:"p"},"@cat"),"."),Object(r.b)("h3",{id:"additional-information-1"},"Additional information"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"$input = 'Regular expression @name';\n$values = [\n    'name' => 'value'\n];\nPattern::inject($input, $values);\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Data:"),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"Value of ",Object(r.b)("inlineCode",{parentName:"li"},"$input")," is treated as a regular expression"),Object(r.b)("li",{parentName:"ul"},"Values in ",Object(r.b)("inlineCode",{parentName:"li"},"$values")," are treated as a string literal"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Data structure"),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"Each placeholder (",Object(r.b)("inlineCode",{parentName:"li"},"@name")," or ",Object(r.b)("code",null,"`","name","`"),") ",Object(r.b)("strong",{parentName:"li"},"must")," have a counterpart in ",Object(r.b)("inlineCode",{parentName:"li"},"$values"),":",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"a key"),Object(r.b)("li",{parentName:"ul"},"a value, if it's ignored"))),Object(r.b)("li",{parentName:"ul"},"Each key or ignored value in ",Object(r.b)("inlineCode",{parentName:"li"},"$values")," ",Object(r.b)("strong",{parentName:"li"},"must")," have a corresponding placeholder in ",Object(r.b)("inlineCode",{parentName:"li"},"$input")),Object(r.b)("li",{parentName:"ul"},"Placeholder/name/key can only consist of alphanumeric values and an underscore (",Object(r.b)("inlineCode",{parentName:"li"},"[a-zA-Z0-9_]"),")"),Object(r.b)("li",{parentName:"ul"},"If not, ",Object(r.b)("inlineCode",{parentName:"li"},"InvalidArgumentException")," is thrown"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Data types:"),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"Values in ",Object(r.b)("inlineCode",{parentName:"li"},"$values")," can only be of type ",Object(r.b)("inlineCode",{parentName:"li"},"string")),Object(r.b)("li",{parentName:"ul"},"If not, ",Object(r.b)("inlineCode",{parentName:"li"},"InvalidArgumentException")," is thrown"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Values in ",Object(r.b)("inlineCode",{parentName:"p"},"$values"),":"),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"are always quoted (using ",Object(r.b)("inlineCode",{parentName:"li"},"preg::quote()"),") with regard to the delimiter chosen by ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/delimiters"}),"Automatic Delimiters")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"don't contribute")," to the pattern being automatically delimited. Otherwise, user-input data could influence the pattern being invalid or not")))),Object(r.b)("h2",{id:"building-process"},"Building process"),Object(r.b)("p",null,"Here's how a given pattern is constructed:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"Pattern::prepare([\"(My|Our)\", ' ',  \"(dog|cat)'s name is \", [$dog], ' and ', [$cat], '!']);\n")),Object(r.b)("p",null,"for values:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"$dog = '192.168.0.1';\n$cat = '(?name';\n")),Object(r.b)("p",null,"Process:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"[\"(My|Our)\", ' ', \"(dog|cat)'s name is \", [$dog], ' and ', [$cat], '!']")),Object(r.b)("li",{parentName:"ul"},"Values supposed to be treated as string literals are cut out"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"[\"(My|Our)\", ' ', \"(dog|cat)'s name is \", ' and ', '!']")),Object(r.b)("li",{parentName:"ul"},"Pattern is then imploded"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},'"(My|Our) (dog|cat)\'s name is and !"')),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/delimiters"}),"Automatic Delimiters")," are used to chose the delimiter"),Object(r.b)("li",{parentName:"ul"},"The pattern is being checked:",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"whether it's already delimiter, and if it is:",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"what delimiter is used exactly"),Object(r.b)("li",{parentName:"ul"},"whether it's used with flags"))),Object(r.b)("li",{parentName:"ul"},"and if it's not, a suitable delimiter is chosen automatically"))),Object(r.b)("li",{parentName:"ul"},"In this case, ",Object(r.b)("inlineCode",{parentName:"li"},"/")," is chosen"),Object(r.b)("li",{parentName:"ul"},"Values supposed to be treated as string literals are quoted using the delimiter"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{}),"[\"(My|Our)\", ' ',  \"(dog|cat)'s name is \", preg::quote($dog, '/'), ' and ', preg::quote($cat, '/'), '!']\n"))),Object(r.b)("li",{parentName:"ul"},"The final pattern is joined, flags are appended and the pattern is returned",Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-regexp"}),"/(My|Our) (dog|cat)'s name is 192\\.168\\.0\\.1 and \\(\\?name!/\n")))))}o.isMDXComponent=!0},204:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return m}));var n=a(0),r=a.n(n);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=r.a.createContext({}),p=function(e){var t=r.a.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):c({},t,{},e)),a},s=function(e){var t=p(e.components);return r.a.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=Object(n.forwardRef)((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,o=b(e,["components","mdxType","originalType","parentName"]),s=p(a),d=n,m=s["".concat(l,".").concat(d)]||s[d]||u[d]||i;return a?r.a.createElement(m,c({ref:t},o,{components:a})):r.a.createElement(m,c({ref:t},o))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,l=new Array(i);l[0]=d;var c={};for(var b in t)hasOwnProperty.call(t,b)&&(c[b]=t[b]);c.originalType=e,c.mdxType="string"==typeof e?e:n,l[1]=c;for(var o=2;o<i;o++)l[o]=a[o];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);