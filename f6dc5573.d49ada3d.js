(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{200:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"rightToc",(function(){return i})),n.d(t,"default",(function(){return p}));n(239),n(244),n(229),n(252),n(254),n(217);var a=n(209),r=n(214),c=n(215);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var o={id:"replace-callback",title:"Replace with callback"},i=[{value:"Replace first",id:"replace-first",children:[]},{value:"Replace more",id:"replace-more",children:[{value:"<code>all()</code>",id:"all",children:[]},{value:"<code>only()</code>",id:"only",children:[]}]},{value:"Return types",id:"return-types",children:[{value:"Explicit string",id:"explicit-string",children:[]}]},{value:"Variable callbacks",id:"variable-callbacks",children:[]}],u={rightToc:i},s="wrapper";function p(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["components"]);return Object(a.b)(s,l({},u,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"After ",Object(a.b)("inlineCode",{parentName:"p"},"replace()"),", you need to explicitly use one of ",Object(a.b)("inlineCode",{parentName:"p"},"first()"),"/",Object(a.b)("inlineCode",{parentName:"p"},"all()"),"/",Object(a.b)("inlineCode",{parentName:"p"},"only(int)")," methods, to express how many\nreplacements should be done."),Object(a.b)("p",null,"Callback passed to ",Object(a.b)("inlineCode",{parentName:"p"},"replace()->callback()")," will only be invoked:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"for ",Object(a.b)("inlineCode",{parentName:"li"},"all()")," - as many times as there are occurrences matched in the subject."),Object(a.b)("li",{parentName:"ul"},"for ",Object(a.b)("inlineCode",{parentName:"li"},"only(int)")," - the same as ",Object(a.b)("inlineCode",{parentName:"li"},"all()"),", but up to an ",Object(a.b)("inlineCode",{parentName:"li"},"int")," limit."),Object(a.b)("li",{parentName:"ul"},"for ",Object(a.b)("inlineCode",{parentName:"li"},"first()")," - once if an occurrence is matched; or not at all if it's not.")),Object(a.b)("h2",{id:"replace-first"},"Replace first"),Object(a.b)(r.a,{defaultValue:"T-Regx",values:[{label:"T-Regx",value:"T-Regx"},{label:"PHP",value:"PHP"}],mdxType:"Tabs"},Object(a.b)(c.a,{value:"T-Regx",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-php"}),"$subject = 'I like scandinavia: Sweden, Norway and Denmark';\n\npattern('[A-Z][a-z]+')->replace($subject)->first()->callback(function (Match $m) {\n    return strtoupper($m->text());\n});\n"))),Object(a.b)(c.a,{value:"PHP",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-php"}),"$subject = 'I like scandinavia: Sweden, Norway and Denmark';\n\npreg::replace_callback('/[A-Z][a-z]+/', function (array $m) {\n    return strtoupper($m[0]);\n}, $subject, 1);\n")))),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-php"}),"'I like scandinavia: SWEDEN, Norway and Denmark'\n")),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"Of course, the callback is only invoked ",Object(a.b)("strong",{parentName:"p"},"if")," your subject is matched with the pattern.")),Object(a.b)("h2",{id:"replace-more"},"Replace more"),Object(a.b)("h3",{id:"all"},Object(a.b)("inlineCode",{parentName:"h3"},"all()")),Object(a.b)("p",null,"Replacing all matched occurrences is the most common use-case:"),Object(a.b)(r.a,{defaultValue:"T-Regx",values:[{label:"T-Regx",value:"T-Regx"},{label:"PHP",value:"PHP"}],mdxType:"Tabs"},Object(a.b)(c.a,{value:"T-Regx",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-php"}),"$subject = 'I like scandinavia: Sweden, Norway and Denmark';\n\npattern('[A-Z][a-z]+')->replace($subject)->all()->callback(function (Match $m) {\n    return strtoupper($m->text());\n});\n"))),Object(a.b)(c.a,{value:"PHP",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-php"}),"$subject = 'I like scandinavia: Sweden, Norway and Denmark';\n\npreg::replace_callback('/[A-Z][a-z]+/', function (array $m) {\n    return strtoupper($m[0]);\n}, $subject);\n")))),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-php"}),"'I like scandinavia: SWEDEN, NORWAY and DENMARK'\n")),Object(a.b)("h3",{id:"only"},Object(a.b)("inlineCode",{parentName:"h3"},"only()")),Object(a.b)(r.a,{defaultValue:"T-Regx",values:[{label:"T-Regx",value:"T-Regx"},{label:"PHP",value:"PHP"}],mdxType:"Tabs"},Object(a.b)(c.a,{value:"T-Regx",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-php"}),"$subject = 'I like scandinavia: Sweden, Norway and Denmark';\n\n// In T-Regx, Match details can be cast to string - that's the matched text\npattern('[A-Z][a-z]+')->replace($subject)->only(2)->callback('strtoupper');\n"))),Object(a.b)(c.a,{value:"PHP",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-php"}),"$subject = 'I like scandinavia: Sweden, Norway and Denmark';\n\n// In Vanilla, $match is an array, and arrays won't cast to string that easily\n\n// preg::replace_callback('/[A-Z][a-z]+/', 'strtoupper', $subject, 2);\n// Warning, empty string is returned\n")))),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-php"}),"'I like scandinavia: SWEDEN, NORWAY and Denmark'\n")),Object(a.b)("h2",{id:"return-types"},"Return types"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"replace()->callback()")," only accepts ",Object(a.b)("inlineCode",{parentName:"p"},"string")," or ",Object(a.b)("inlineCode",{parentName:"p"},"MatchGroup")," as its return type."),Object(a.b)("p",null,"We believe that returning anything, that's not a string or a group can ",Object(a.b)("strong",{parentName:"p"},"be a sign of a bug"),"! Moreover, converting them silently\nwould break our ",Object(a.b)("a",l({parentName:"p"},{href:"whats-the-point#t-regx-to-the-rescue"}),'"Explicity rule"'),"."),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-php"}),"pattern('\\w+')->replace(\"Apples are cool\")->first()->callback(function (Match $match) {\n    return 2;       // <- throws InvalidReturnValueException\n    return true;    // <- throws InvalidReturnValueException\n    return null;    // <- throws InvalidReturnValueException\n});\n")),Object(a.b)("h3",{id:"explicit-string"},"Explicit string"),Object(a.b)("p",null,"If you'd like to replace an occurrence with a numeric value (for example ",Object(a.b)("inlineCode",{parentName:"p"},"'12'"),"), an empty string or ",Object(a.b)("inlineCode",{parentName:"p"},"'true'"),"/",Object(a.b)("inlineCode",{parentName:"p"},"'false'"),"\nliterals - just return them ",Object(a.b)("strong",{parentName:"p"},"explicitly"),"."),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-php"}),"pattern('\\w+')->replace(\"Apples are cool\")->first()->callback(function (Match $match) {\n    return strval(2);                          // ok\n    return true ? 'true' : 'false';            // ok\n    return null ? '' : $something;             // ok\n\n    return $match->text();                     // ok\n    return (string) $match;                    // ok\n    return $match->group('captured')->text();  // ok, if group exists and was matched\n\n    return $match;                             // ok\n    return $match->group('captured');          // ok, if group exists and was matched\n});\n")),Object(a.b)("h2",{id:"variable-callbacks"},"Variable callbacks"),Object(a.b)("p",null,"You can call ",Object(a.b)("inlineCode",{parentName:"p"},"replace()->callback()")," for any valid PHP ",Object(a.b)("inlineCode",{parentName:"p"},"callable")," which accepts one string parameter (or no parameters)\nand returns ",Object(a.b)("inlineCode",{parentName:"p"},"string"),"."),Object(a.b)(r.a,{defaultValue:"T-Regx",values:[{label:"T-Regx",value:"T-Regx"},{label:"PHP",value:"PHP"}],mdxType:"Tabs"},Object(a.b)(c.a,{value:"T-Regx",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-php"}),"pattern('\\w+')->replace('Apples are cool')->first()->callback('strtoupper');\n"))),Object(a.b)(c.a,{value:"PHP",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-php"}),"// This code is actually impossible in Vanilla-PHP.\n// In T-Regx, Match details can be cast to string - that's the matched text\n// In Vanilla, $match is an array, and arrays won't cast to string that easily\n\n// preg::replace_callback('/\\w+/', 'strtoupper', $subject, 1);\n\npreg::replace_callback('/\\w+/', function (array $m) {\n    return strtoupper($m[0]);\n}, 'Apples are cool', 1);\n")))),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-php"}),"'APPLES are cool'\n")),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"In this example, ",Object(a.b)("a",l({parentName:"p"},{href:"/docs/match-details"}),Object(a.b)("inlineCode",{parentName:"a"},"Match"))," will be cast to string, which is the same as calling ",Object(a.b)("inlineCode",{parentName:"p"},"Match.text()")," method.")))}p.isMDXComponent=!0},210:function(e,t,n){var a=n(246)("wks"),r=n(224),c=n(212).Symbol;e.exports=function(e){return a[e]||(a[e]=c&&c[e]||(c||r)("Symbol."+e))}},211:function(e,t,n){var a=n(213),r=n(223);e.exports=n(240)?function(e,t,n){return a.setDesc(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},212:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},213:function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},214:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(216),l=n.n(c);t.a=function(e){const{block:t,children:n,defaultValue:c,values:o}=e,[i,u]=Object(a.useState)(c);return r.a.createElement("div",null,r.a.createElement("ul",{className:l()("tabs",{"tabs--block":t})},o.map(({value:e,label:t})=>r.a.createElement("li",{className:l()("tab-item",{"tab-item--active":i===e}),key:e,onClick:()=>u(e)},t))),r.a.createElement("div",{className:"margin-vert--md"},a.Children.toArray(n).filter(e=>e.props.value===i)[0]))}},215:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){return r.a.createElement("div",null,e.children)}},218:function(e,t,n){var a=n(212),r=n(219),c=n(211),l=n(221),o=n(241),i=function(e,t,n){var u,s,p,b,m=e&i.F,f=e&i.G,d=e&i.S,h=e&i.P,j=e&i.B,g=f?a:d?a[t]||(a[t]={}):(a[t]||{}).prototype,y=f?r:r[t]||(r[t]={}),O=y.prototype||(y.prototype={});for(u in f&&(n=t),n)p=((s=!m&&g&&u in g)?g:n)[u],b=j&&s?o(p,a):h&&"function"==typeof p?o(Function.call,p):p,g&&!s&&l(g,u,p),y[u]!=p&&c(y,u,b),h&&O[u]!=p&&(O[u]=p)};a.core=r,i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,e.exports=i},219:function(e,t){var n=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},220:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},221:function(e,t,n){var a=n(212),r=n(211),c=n(224)("src"),l=Function.toString,o=(""+l).split("toString");n(219).inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,n,l){"function"==typeof n&&(n.hasOwnProperty(c)||r(n,c,e[t]?""+e[t]:o.join(String(t))),n.hasOwnProperty("name")||r(n,"name",t)),e===a?e[t]=n:(l||delete e[t],r(e,t,n))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[c]||l.call(this)}))},222:function(e,t){e.exports={}},223:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},224:function(e,t){var n=0,a=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+a).toString(36))}},225:function(e,t,n){var a=n(226);e.exports=function(e){return Object(a(e))}},226:function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},227:function(e,t,n){var a=n(228);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==a(e)?e.split(""):Object(e)}},228:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},229:function(e,t,n){"use strict";var a=n(245),r=n(247),c=n(222),l=n(248);e.exports=n(249)(Array,"Array",(function(e,t){this._t=l(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),c.Arguments=c.Array,a("keys"),a("values"),a("entries")},230:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},231:function(e,t,n){var a=n(213).setDesc,r=n(230),c=n(210)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,c)&&a(e,c,{configurable:!0,value:t})}},239:function(e,t,n){var a=n(218);a(a.S+a.F,"Object",{assign:n(243)})},240:function(e,t,n){e.exports=!n(220)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},241:function(e,t,n){var a=n(242);e.exports=function(e,t,n){if(a(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,a){return e.call(t,n,a)};case 3:return function(n,a,r){return e.call(t,n,a,r)}}return function(){return e.apply(t,arguments)}}},242:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},243:function(e,t,n){var a=n(213),r=n(225),c=n(227);e.exports=n(220)((function(){var e=Object.assign,t={},n={},a=Symbol(),r="abcdefghijklmnopqrst";return t[a]=7,r.split("").forEach((function(e){n[e]=e})),7!=e({},t)[a]||Object.keys(e({},n)).join("")!=r}))?function(e,t){for(var n=r(e),l=arguments,o=l.length,i=1,u=a.getKeys,s=a.getSymbols,p=a.isEnum;o>i;)for(var b,m=c(l[i++]),f=s?u(m).concat(s(m)):u(m),d=f.length,h=0;d>h;)p.call(m,b=f[h++])&&(n[b]=m[b]);return n}:Object.assign},244:function(e,t,n){n(229);var a=n(212),r=n(211),c=n(222),l=n(210)("iterator"),o=a.NodeList,i=a.HTMLCollection,u=o&&o.prototype,s=i&&i.prototype,p=c.NodeList=c.HTMLCollection=c.Array;u&&!u[l]&&r(u,l,p),s&&!s[l]&&r(s,l,p)},245:function(e,t,n){var a=n(210)("unscopables"),r=Array.prototype;null==r[a]&&n(211)(r,a,{}),e.exports=function(e){r[a][e]=!0}},246:function(e,t,n){var a=n(212),r=a["__core-js_shared__"]||(a["__core-js_shared__"]={});e.exports=function(e){return r[e]||(r[e]={})}},247:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},248:function(e,t,n){var a=n(227),r=n(226);e.exports=function(e){return a(r(e))}},249:function(e,t,n){"use strict";var a=n(250),r=n(218),c=n(221),l=n(211),o=n(230),i=n(222),u=n(251),s=n(231),p=n(213).getProto,b=n(210)("iterator"),m=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,n,d,h,j,g){u(n,t,d);var y,O,v=function(e){if(!m&&e in w)return w[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",N="values"==h,k=!1,w=e.prototype,T=w[b]||w["@@iterator"]||h&&w[h],P=T||v(h);if(T){var S=p(P.call(new e));s(S,x,!0),!a&&o(w,"@@iterator")&&l(S,b,f),N&&"values"!==T.name&&(k=!0,P=function(){return T.call(this)})}if(a&&!g||!m&&!k&&w[b]||l(w,b,P),i[t]=P,i[x]=f,h)if(y={values:N?P:v("values"),keys:j?P:v("keys"),entries:N?v("entries"):P},g)for(O in y)O in w||c(w,O,y[O]);else r(r.P+r.F*(m||k),t,y);return y}},250:function(e,t){e.exports=!1},251:function(e,t,n){"use strict";var a=n(213),r=n(223),c=n(231),l={};n(211)(l,n(210)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=a.create(l,{next:r(1,n)}),c(e,t+" Iterator")}},252:function(e,t,n){"use strict";var a=n(253),r={};r[n(210)("toStringTag")]="z",r+""!="[object z]"&&n(221)(Object.prototype,"toString",(function(){return"[object "+a(this)+"]"}),!0)},253:function(e,t,n){var a=n(228),r=n(210)("toStringTag"),c="Arguments"==a(function(){return arguments}());e.exports=function(e){var t,n,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=(t=Object(e))[r])?n:c?a(t):"Object"==(l=a(t))&&"function"==typeof t.callee?"Arguments":l}},254:function(e,t,n){var a=n(225);n(255)("keys",(function(e){return function(t){return e(a(t))}}))},255:function(e,t,n){var a=n(218),r=n(219),c=n(220);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],l={};l[e]=t(n),a(a.S+a.F*c((function(){n(1)})),"Object",l)}}}]);