<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Replace by group · T-Regx</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Method `replace()-&gt;by()-&gt;group()` can be used when you would just like to replace a whole match by one of its capturing group,"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Replace by group · T-Regx"/><meta property="og:type" content="website"/><meta property="og:url" content="https://t-regx.com/"/><meta property="og:description" content="Method `replace()-&gt;by()-&gt;group()` can be used when you would just like to replace a whole match by one of its capturing group,"/><meta property="og:image" content="https://t-regx.com//img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://t-regx.com//img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css"/><link rel="alternate" type="application/atom+xml" href="https://t-regx.com/blog/atom.xml" title="T-Regx Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://t-regx.com/blog/feed.xml" title="T-Regx Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100,"showWhenScrollTopIs":190,"scrollDuration":400,"backgroundColor":"#26768c"}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/t.regx.borderless.png" alt="T-Regx"/><h2 class="headerTitleWithLogo">T-Regx</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search the website" title="Search the website"/></li><li class="siteNavGroupActive"><a href="/docs/installation" target="_self">Docs</a></li><li class=""><a href="/comparison" target="_self">Compare</a></li><li class=""><a href="/help" target="_self">Help</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="https://github.com/T-Regx/T-Regx" target="_blank">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Replacing</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">About</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/overview">What&#x27;s T-Regx?</a></li><li class="navListItem"><a class="navItem" href="/docs/whats-the-point">Why would I use T-Regx?</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Kick Start</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/introduction">Introduction</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Matching</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/match">Match a subject</a></li><li class="navListItem"><a class="navItem" href="/docs/match-first">First occurrence</a></li><li class="navListItem"><a class="navItem" href="/docs/match-for-first">Optional matches</a></li><li class="navListItem"><a class="navItem" href="/docs/match-for-each">For Each/Iterate</a></li><li class="navListItem"><a class="navItem" href="/docs/match-map">Map occurrences</a></li><li class="navListItem"><a class="navItem" href="/docs/match-flat-map">Map with keys (Flat map)</a></li><li class="navListItem"><a class="navItem" href="/docs/match-iterator">Iterator</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Replacing</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/replace">Replacing a string</a></li><li class="navListItem"><a class="navItem" href="/docs/replace-with">Replace with a constant value</a></li><li class="navListItem"><a class="navItem" href="/docs/replace-callback">Replace with callback</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/replace-by-group">Replace by group</a></li><li class="navListItem"><a class="navItem" href="/docs/replace-by-map">Replace by map</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Match Details</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/match-details">Match details</a></li><li class="navListItem"><a class="navItem" href="/docs/match-groups">Capturing groups</a></li><li class="navListItem"><a class="navItem" href="/docs/match-offsets">Match offsets</a></li><li class="navListItem"><a class="navItem" href="/docs/match-group">Inline groups</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Prepared Patterns</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/handling-user-input">Handling user input</a></li><li class="navListItem"><a class="navItem" href="/docs/prepared-patterns">Prepared Patterns - User input</a></li><li class="navListItem"><a class="navItem" href="/docs/composite-pattern">Composite Pattern</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Misc</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/delimiters">Automatic delimiters</a></li><li class="navListItem"><a class="navItem" href="/docs/count">Count occurrences</a></li><li class="navListItem"><a class="navItem" href="/docs/quoting">Quoting</a></li><li class="navListItem"><a class="navItem" href="/docs/is-valid">Validate a pattern</a></li><li class="navListItem"><a class="navItem" href="/docs/split">Split a string</a></li><li class="navListItem"><a class="navItem" href="/docs/filter">Filter an array</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Advanced</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/replace-match-details">Advanced replace details</a></li><li class="navListItem"><a class="navItem" href="/docs/prepared-patterns-in-details">Prepared Patterns in details</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Replace by group</h1></header><article><div><span><p>Method <code>replace()-&gt;by()-&gt;group()</code> can be used when you would just like to replace a whole match by one of its capturing group,
optionally handling what should happen when a group is not matched.</p>
<p>This is, in fact, a shorthand for a rather common usage of <code>callback()</code> with a function replacing by a capturing
group - <a href="/docs/replace-by-group#identity">Scroll down to see an example</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="overview"></a><a href="#overview" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>
<p>There are several URL addresses in <code>$links</code> variable. Given a regular expression matching a URL, with a group
capturing the URL domain, you can easily leave off only the domain in the matched links:</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-151-tab-152" class="nav-link active" data-group="group_151" data-tab="tab-group-151-content-152">T-Regx</div><div id="tab-group-151-tab-153" class="nav-link" data-group="group_151" data-tab="tab-group-151-content-153">PHP</div></div><div class="tab-content"><div id="tab-group-151-content-152" class="tab-pane active" data-group="group_151" tabindex="-1"><div><span><pre><code class="hljs css language-php">$links = <span class="hljs-string">'My links are: www.google.com, http://socket.io, facebook.com, https://t-regx.com :)'</span>;<br /><br />pattern(<span class="hljs-string">'(https?://)?(www\.)?(?&lt;domain&gt;[\w-]+)\.(com|io)'</span>)-&gt;replace($links)<br />    -&gt;all()<br />    -&gt;by()-&gt;group(<span class="hljs-string">'domain'</span>)-&gt;orThrow();<br /></code></pre>
</span></div></div><div id="tab-group-151-content-153" class="tab-pane" data-group="group_151" tabindex="-1"><div><span><pre><code class="hljs css language-php">$links = <span class="hljs-string">'My links are: www.google.com, http://socket.io, facebook.com, https://t-regx.com :)'</span>;<br /><br /><span class="hljs-keyword">return</span> preg::replace_callback(<span class="hljs-string">'#(https?://)?(www\.)?(?&lt;domain&gt;[\w-]+)\.(com|io)#'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($match)</span> </span>{<br />    <span class="hljs-keyword">return</span> $match[<span class="hljs-string">'domain'</span>];<br />}, $links);<br /><br /><span class="hljs-comment">// This code is just a simplification.</span><br /><span class="hljs-comment">// The PHP equivalent is actually a bit more complicated. Please, see PHP snippets below.</span><br /></code></pre>
</span></div></div></div></div>
<!--T-Regx:{return-at(2)}-->
<!--Result-Value-->
<pre><code class="hljs css language-php"><span class="hljs-string">'My links are: google, socket, facebook, t-regx :)'</span>
</code></pre>
<p>Each matched link was replaced with <code>'domain'</code> capturing group. In this case, <code>'domain'</code> capturing group is not an
optional group (it's always going to be matched, when the whole pattern is matched), so the matched occurrence is
always going to be replaced with it.</p>
<blockquote>
<p>Of course, <code>NonexistentGroupException</code> is thrown when <code>by()-&gt;group()</code> is used with a non-existent group. Likewise,
<code>\InvalidArgumentException</code> is thrown for a malformed group, e.g. <code>-2</code> or <code>&quot;2name&quot;</code>.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="unmatched-group"></a><a href="#unmatched-group" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Unmatched group</h2>
<p>How do you handle unmatched/optional groups?</p>
<p>For example, a group <code>(?&lt;name&gt;\w+)?</code> is optional. For an occurrence with the optional <code>'name'</code> group that happened not
to be matched,  you can chose either to ignore the replacement (simply don't perform any replace in the match),
replace with a default or an empty string, or call a producer to return what should the match be replaced with.</p>
<p>You can also chose to throw an exception, if the unmatched group is not supposed to be optional, to ensure integrity.</p>
<ul>
<li><code>orIgnore()</code> - leaves the match unchanged - doesn't replace the match, if the group itself is not matched</li>
<li><code>orEmpty()</code> - matched occurrence is replaced with an empty string</li>
<li><code>orReturn(string)</code> - match is replaced with the given <code>string</code> argument</li>
<li><code>orElse(callable)</code> - uses a callback with <a href="/docs/match-details"><code>Match</code></a> argument, in order to evaluate a replacement</li>
<li><code>orThrow()</code> - throws a default or a custom exception, just like <a href="/docs/match-for-first">forFirst()-&gt;orThrow()</a></li>
</ul>
<blockquote>
<p><code>orEmpty()</code> is the most performance-light method, because it uses <code>preg_replace()</code>, whereas <code>orReturn()</code>, <code>orIgnore()</code>,
<code>orElse()</code> and <code>orThrow()</code> use <code>preg_replace_callback()</code>.</p>
</blockquote>
<hr>
<p>Now, for the sake of this example, let's say a domain is an optional part of an URL address. Below, you'll find 4
code snippets illustrating the usage of each of those:</p>
<h3><a class="anchor" aria-hidden="true" id="orignore"></a><a href="#orignore" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>orIgnore()</code></h3>
<p>Matched links with matched <code>'domain'</code> group are replaced with it. Links without matched optional groups, however,
are simply left as they were (ignored):</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-154-tab-155" class="nav-link active" data-group="group_154" data-tab="tab-group-154-content-155">T-Regx</div><div id="tab-group-154-tab-156" class="nav-link" data-group="group_154" data-tab="tab-group-154-content-156">PHP</div></div><div class="tab-content"><div id="tab-group-154-content-155" class="tab-pane active" data-group="group_154" tabindex="-1"><div><span><pre><code class="hljs css language-php">$links = <span class="hljs-string">'My links are: www.google.com, http://.io, facebook.com, https://.com :)'</span>;<br /><br />pattern(<span class="hljs-string">'(https?://)?(www\.)?(?&lt;domain&gt;[\w-]+)?\.(com|io)'</span>)-&gt;replace($links)<br />    -&gt;all()<br />    -&gt;by()-&gt;group(<span class="hljs-string">'domain'</span>)-&gt;orIgnore();<br /></code></pre>
</span></div></div><div id="tab-group-154-content-156" class="tab-pane" data-group="group_154" tabindex="-1"><div><span><pre><code class="hljs css language-php">$links = <span class="hljs-string">'My links are: www.google.com, http://.io, facebook.com, https://.com :)'</span>;<br /><br /><span class="hljs-keyword">return</span> preg::replace_callback(<span class="hljs-string">'#(https?://)?(www\.)?(?&lt;domain&gt;[\w-]+)?\.(com|io)#'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($match)</span> </span>{<br />    validateGroupName(<span class="hljs-string">'domain'</span>);<br />    <span class="hljs-keyword">if</span> (!array_key_exists(<span class="hljs-string">'domain'</span>, $match)) {<br />        <span class="hljs-comment">// group is either un-matched or non-existent</span><br />        <span class="hljs-keyword">if</span> (validateGroupExists(<span class="hljs-string">'domain'</span>, $match)) {<br />            <span class="hljs-keyword">return</span> $match[<span class="hljs-number">0</span>];<br />        } <span class="hljs-keyword">else</span> {<br />            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NonexistentGroupException(<span class="hljs-string">'domain'</span>);<br />        }<br />    }<br />    <span class="hljs-keyword">if</span> ($match[<span class="hljs-string">'domain'</span>] === <span class="hljs-string">''</span>) {<br />        <span class="hljs-comment">// group is either un-matched or matched an empty string</span><br />        <span class="hljs-keyword">if</span> (!validateGroupMatched(<span class="hljs-string">'domain'</span>, $match)) {<br />            <span class="hljs-keyword">return</span> $match[<span class="hljs-number">0</span>];<br />        }<br />    }<br />    <span class="hljs-keyword">return</span> $match[<span class="hljs-string">'domain'</span>];<br />}, $links);<br /></code></pre>
</span></div></div></div></div>
<!--T-Regx:{return-at(2)}-->
<!--Result-Value-->
<pre><code class="hljs css language-php"><span class="hljs-string">'My links are: google, http://.io, facebook, https://.com :)'</span>
</code></pre>
<p>Description:</p>
<ul>
<li>Match <code>www.google.com</code> was replaced with the matched occurrence of it's capturing group - <code>google</code></li>
<li>Match <code>facebook.com</code> was replaced with the matched occurrence of it's capturing group - <code>facebook</code></li>
<li>Matches <code>http://.io</code> and <code>https://.com</code> were matched, but the capturing group <code>'domain'</code> inside wasn't, so those matches
are ignored, in this case.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="orempty"></a><a href="#orempty" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>orEmpty()</code></h3>
<p>Matched links with matched <code>'domain'</code> group are replaced with it. Links without matched optional groups, however,
are replaced with an empty string:</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-157-tab-158" class="nav-link active" data-group="group_157" data-tab="tab-group-157-content-158">T-Regx</div><div id="tab-group-157-tab-159" class="nav-link" data-group="group_157" data-tab="tab-group-157-content-159">PHP</div></div><div class="tab-content"><div id="tab-group-157-content-158" class="tab-pane active" data-group="group_157" tabindex="-1"><div><span><pre><code class="hljs css language-php">$links = <span class="hljs-string">'My links are: www.google.com, http://.io, facebook.com, https://.com :)'</span>;<br /><br />pattern(<span class="hljs-string">'(https?://)?(www\.)?(?&lt;domain&gt;[\w-]+)?\.(com|io)'</span>)-&gt;replace($links)<br />    -&gt;all()<br />    -&gt;by()-&gt;group(<span class="hljs-string">'domain'</span>)-&gt;orEmpty();<br /></code></pre>
</span></div></div><div id="tab-group-157-content-159" class="tab-pane" data-group="group_157" tabindex="-1"><div><span><pre><code class="hljs css language-php">$links = <span class="hljs-string">'My links are: www.google.com, http://.io, facebook.com, https://.com :)'</span>;<br /><br /><span class="hljs-keyword">return</span> preg::replace_callback(<span class="hljs-string">'#(https?://)?(www\.)?(?&lt;domain&gt;[\w-]+)?\.(com|io)#'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($match)</span> </span>{<br />    validateGroupName(<span class="hljs-string">'domain'</span>);<br />    <span class="hljs-keyword">if</span> (!array_key_exists(<span class="hljs-string">'domain'</span>, $match)) {<br />        <span class="hljs-comment">// group is either un-matched or non-existent</span><br />        <span class="hljs-keyword">if</span> (validateGroupExists(<span class="hljs-string">'domain'</span>, $match)) {<br />            <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;<br />        } <span class="hljs-keyword">else</span> {<br />            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NonexistentGroupException(<span class="hljs-string">'domain'</span>);<br />        }<br />    }<br />    <span class="hljs-comment">// Check between unmatched and matched-empty is unnecessary</span><br />    <span class="hljs-keyword">return</span> $match[<span class="hljs-string">'domain'</span>];<br />}, $links);<br /></code></pre>
</span></div></div></div></div>
<!--T-Regx:{return-at(2)}-->
<!--Result-Value-->
<pre><code class="hljs css language-php"><span class="hljs-string">'My links are: google, , facebook,  :)'</span>
</code></pre>
<p>Description:</p>
<ul>
<li>Matches <code>http://.io</code> and <code>https://.com</code> were matched, but the capturing group <code>'domain'</code> inside wasn't, so those matches
are replaced with an empty string, in this case.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="orreturnstring"></a><a href="#orreturnstring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>orReturn(string)</code></h3>
<p>Matched links with matched <code>'domain'</code> group are replaced with it. Links without matched optional groups, however,
are replaced with a given parameter string:</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-160-tab-161" class="nav-link active" data-group="group_160" data-tab="tab-group-160-content-161">T-Regx</div><div id="tab-group-160-tab-162" class="nav-link" data-group="group_160" data-tab="tab-group-160-content-162">PHP</div></div><div class="tab-content"><div id="tab-group-160-content-161" class="tab-pane active" data-group="group_160" tabindex="-1"><div><span><pre><code class="hljs css language-php">$links = <span class="hljs-string">'My links are: www.google.com, http://.io, facebook.com, https://.com :)'</span>;<br /><br />pattern(<span class="hljs-string">'(https?://)?(www\.)?(?&lt;domain&gt;[\w-]+)?\.(com|io)'</span>)-&gt;replace($links)<br />    -&gt;all()<br />    -&gt;by()-&gt;group(<span class="hljs-string">'domain'</span>)-&gt;orReturn(<span class="hljs-string">'UNKNOWN'</span>);<br /></code></pre>
</span></div></div><div id="tab-group-160-content-162" class="tab-pane" data-group="group_160" tabindex="-1"><div><span><pre><code class="hljs css language-php">$links = <span class="hljs-string">'My links are: www.google.com, http://.io, facebook.com, https://.com :)'</span>;<br /><br /><span class="hljs-keyword">return</span> preg::replace_callback(<span class="hljs-string">'#(https?://)?(www\.)?(?&lt;domain&gt;[\w-]+)?\.(com|io)#'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($match)</span> </span>{<br />    validateGroupName(<span class="hljs-string">'domain'</span>);<br />    <span class="hljs-keyword">if</span> (!array_key_exists(<span class="hljs-string">'domain'</span>, $match)) {<br />        <span class="hljs-comment">// group is either un-matched or non-existent</span><br />        <span class="hljs-keyword">if</span> (validateGroupExists(<span class="hljs-string">'domain'</span>, $match)) {<br />            <span class="hljs-keyword">return</span> <span class="hljs-string">'UNKNOWN'</span>;<br />        } <span class="hljs-keyword">else</span> {<br />            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NonexistentGroupException(<span class="hljs-string">'domain'</span>);<br />        }<br />    }<br />    <span class="hljs-keyword">if</span> ($match[<span class="hljs-string">'domain'</span>] === <span class="hljs-string">''</span>) {<br />        <span class="hljs-comment">// group is either un-matched or matched an empty string</span><br />        <span class="hljs-keyword">if</span> (!validateGroupMatched(<span class="hljs-string">'domain'</span>, $match)) {<br />            <span class="hljs-keyword">return</span> <span class="hljs-string">'UNKNOWN'</span>;<br />        }<br />    }<br />    <span class="hljs-keyword">return</span> $match[<span class="hljs-string">'domain'</span>];<br />}, $links);<br /></code></pre>
</span></div></div></div></div>
<!--T-Regx:{return-at(2)}-->
<!--Result-Value-->
<pre><code class="hljs css language-php"><span class="hljs-string">'My links are: google, UNKNOWN, facebook, UNKNOWN :)'</span>
</code></pre>
<p>Description:</p>
<ul>
<li>Matches <code>http://.io</code> and <code>https://.com</code> were matched, but the capturing group <code>'domain'</code> inside wasn't, so those matches
are replaced with a given <code>'UNKNOWN'</code> string, in this case.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="orelsecallable"></a><a href="#orelsecallable" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>orElse(callable)</code></h3>
<p>Matched links with matched <code>'domain'</code> group are replaced with it. Links without matched optional groups, however,
are then passed to the producer, which result is then replaced in place of the link:</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-163-tab-164" class="nav-link active" data-group="group_163" data-tab="tab-group-163-content-164">T-Regx</div><div id="tab-group-163-tab-165" class="nav-link" data-group="group_163" data-tab="tab-group-163-content-165">PHP</div></div><div class="tab-content"><div id="tab-group-163-content-164" class="tab-pane active" data-group="group_163" tabindex="-1"><div><span><pre><code class="hljs css language-php">$links = <span class="hljs-string">'My links are: www.google.com, http://.io, facebook.com, https://.com :)'</span>;<br /><br />pattern(<span class="hljs-string">'(https?://)?(www\.)?(?&lt;domain&gt;[\w-]+)?\.(com|io)'</span>)-&gt;replace($links)<br />    -&gt;all()<br />    -&gt;by()-&gt;group(<span class="hljs-string">'domain'</span>)-&gt;orElse(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(Match $match)</span> </span>{<br />        <span class="hljs-keyword">return</span> <span class="hljs-string">"Not found **$match**"</span>;<br />    });<br /></code></pre>
</span></div></div><div id="tab-group-163-content-165" class="tab-pane" data-group="group_163" tabindex="-1"><div><span><pre><code class="hljs css language-php">$links = <span class="hljs-string">'My links are: www.google.com, http://.io, facebook.com, https://.com :)'</span>;<br /><br />$producer = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(array $match)</span> </span>{<br />    <span class="hljs-keyword">return</span> <span class="hljs-string">"Not found **{$match[0]}**"</span>;<br />};<br /><br /><span class="hljs-keyword">return</span> preg::replace_callback(<span class="hljs-string">'#(https?://)?(www\.)?(?&lt;domain&gt;[\w-]+)?\.(com|io)#'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($match)</span> <span class="hljs-title">use</span> <span class="hljs-params">($producer)</span> </span>{<br />    validateGroupName(<span class="hljs-string">'domain'</span>);<br />    <span class="hljs-keyword">if</span> (!array_key_exists(<span class="hljs-string">'domain'</span>, $match)) {<br />        <span class="hljs-comment">// group is either un-matched or non-existent</span><br />        <span class="hljs-keyword">if</span> (validateGroupExists(<span class="hljs-string">'domain'</span>, $match)) {<br />            <span class="hljs-keyword">return</span> $producer($match);<br />        } <span class="hljs-keyword">else</span> {<br />            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NonexistentGroupException(<span class="hljs-string">'domain'</span>);<br />        }<br />    }<br />    <span class="hljs-keyword">if</span> ($match[<span class="hljs-string">'domain'</span>] === <span class="hljs-string">''</span>) {<br />        <span class="hljs-comment">// group is either un-matched or matched an empty string</span><br />        <span class="hljs-keyword">if</span> (!validateGroupMatched(<span class="hljs-string">'domain'</span>, $match)) {<br />            <span class="hljs-keyword">return</span> $producer($match);<br />        }<br />    }<br />    <span class="hljs-keyword">return</span> $match[<span class="hljs-string">'domain'</span>];<br />}, $links);<br /></code></pre>
</span></div></div></div></div>
<!--T-Regx:{return-at(2)}-->
<!--Result-Value-->
<pre><code class="hljs css language-php"><span class="hljs-string">'My links are: google, Not found **http://.io**, facebook, Not found **https://.com** :)'</span>
</code></pre>
<p>Description:</p>
<ul>
<li>Matches <code>http://.io</code> and <code>https://.com</code> were matched, but the capturing group <code>'domain'</code> inside wasn't, so callback
function is called with <code>Match</code> details (first with <code>http://.io</code>, and then with <code>https://.com</code>), and the link is replaced
with a result of that function.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="orthrow"></a><a href="#orthrow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>orThrow()</code></h3>
<p>You can either call this method without parameters, or with your custom exception class name (just like <a href="/docs/match-for-first"><code>forFirst()</code></a> parameter):</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-166-tab-167" class="nav-link active" data-group="group_166" data-tab="tab-group-166-content-167">T-Regx</div><div id="tab-group-166-tab-168" class="nav-link" data-group="group_166" data-tab="tab-group-166-content-168">PHP</div></div><div class="tab-content"><div id="tab-group-166-content-167" class="tab-pane active" data-group="group_166" tabindex="-1"><div><span><pre><code class="hljs css language-php">$links = <span class="hljs-string">'My links are: www.google.com, http://socket.io, facebook.com, https://t-regx.com :)'</span>;<br /><br />pattern(<span class="hljs-string">'(https?://)?(www\.)?(?&lt;domain&gt;[\w-]+)?\.(com|io)'</span>)-&gt;replace($links)<br />    -&gt;all()<br />    -&gt;by()-&gt;group(<span class="hljs-string">'domain'</span>)-&gt;orThrow(MyCustomException::class);<br /></code></pre>
</span></div></div><div id="tab-group-166-content-168" class="tab-pane" data-group="group_166" tabindex="-1"><div><span><pre><code class="hljs css language-php">$links = <span class="hljs-string">'My links are: www.google.com, http://socket.io, facebook.com, https://t-regx.com :)'</span>;<br /><br /><span class="hljs-keyword">return</span> preg::replace_callback(<span class="hljs-string">'#(https?://)?(www\.)?(?&lt;domain&gt;[\w-]+)?\.(com|io)#'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($match)</span> </span>{<br />    validateGroupName(<span class="hljs-string">'domain'</span>);<br />    <span class="hljs-keyword">if</span> (!array_key_exists(<span class="hljs-string">'domain'</span>, $match)) {<br />        <span class="hljs-comment">// group is either un-matched or non-existent</span><br />        <span class="hljs-keyword">if</span> (validateGroupExists(<span class="hljs-string">'domain'</span>, $match)) {<br />            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MyCustomException();<br />        } <span class="hljs-keyword">else</span> {<br />            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NonexistentGroupException(<span class="hljs-string">'domain'</span>);<br />        }<br />    }<br />    <span class="hljs-keyword">if</span> ($match[<span class="hljs-string">'domain'</span>] === <span class="hljs-string">''</span>) {<br />        <span class="hljs-comment">// group is either un-matched or matched an empty string</span><br />        <span class="hljs-keyword">if</span> (!validateGroupMatched(<span class="hljs-string">'domain'</span>, $match)) {<br />            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MyCustomException();<br />        }<br />    }<br />    <span class="hljs-keyword">return</span> $match[<span class="hljs-string">'domain'</span>];<br />}, $links);<br /></code></pre>
</span></div></div></div></div>
<!--T-Regx:{return-at(2)}-->
<!--Result-Value-->
<pre><code class="hljs css language-php"><span class="hljs-string">'My links are: google, socket, facebook, t-regx :)'</span>
</code></pre>
<p>Of course, for subject <code>$links</code> equal to <code>'My links are: www..com'</code> (optional group <code>'domain'</code> is unmatched) - <code>MyCustomException</code> would be thrown.</p>
<h2><a class="anchor" aria-hidden="true" id="identity"></a><a href="#identity" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Identity</h2>
<p>As mentioned, <code>replace()-&gt;by()-&gt;group()</code> is just a short-hand for <code>replace()-&gt;callback()</code>.</p>
<p>The below <code>by()-&gt;group()</code> code:</p>
<pre><code class="hljs css language-php">pattern(<span class="hljs-string">'(https?://)?(www\.)?(?&lt;domain&gt;[\w-]+)\.(com|io)'</span>)-&gt;replace($links)
    -&gt;all()
    -&gt;by()-&gt;group(<span class="hljs-string">'domain'</span>)-&gt;orXXX();
</code></pre>
<p>is identical to:</p>
<pre><code class="hljs css language-php">pattern(<span class="hljs-string">'(https?://)?(www\.)?(?&lt;domain&gt;[\w-]+)\.(com|io)'</span>)-&gt;replace($links)
    -&gt;all()
    -&gt;callback(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(Match $match)</span> </span>{
        <span class="hljs-keyword">return</span> $match-&gt;group(<span class="hljs-string">'domain'</span>)-&gt;orXXX();
    });
</code></pre>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2019-7-27</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/replace-callback"><span class="arrow-prev">← </span><span>Replace with callback</span></a><a class="docs-next button" href="/docs/replace-by-map"><span>Replace by map</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#overview">Overview</a></li><li><a href="#unmatched-group">Unmatched group</a><ul class="toc-headings"><li><a href="#orignore"><code>orIgnore()</code></a></li><li><a href="#orempty"><code>orEmpty()</code></a></li><li><a href="#orreturnstring"><code>orReturn(string)</code></a></li><li><a href="#orelsecallable"><code>orElse(callable)</code></a></li><li><a href="#orthrow"><code>orThrow()</code></a></li></ul></li><li><a href="#identity">Identity</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/t.regx.png" alt="T-Regx" width="64" height="52"/></a><div><h5>Docs</h5><a href="/docs/installation">Installation</a><a href="/docs/introduction">Getting Started</a><a href="/docs/match">Documentation</a><a href="https://github.com/T-Regx/T-Regx/blob/master/ChangeLog.md#api">API Reference</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/T-Regx/T-Regx" target="_blank">GitHub</a><a class="github-button" href="https://github.com/T-Regx/T-Regx" title="See this project on GitHub" data-icon="octicon-star" data-show-count="true" data-count-href="/T-Regx/T-Regx/stargazers" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">T-Regx</a></div></section><section class="copyright">Copyright © 2017-2019 Daniel Wilkowski</section><section class="sitemap discussion-section"><div><div>
<script>
    (function () {
       if (typeof window.disqus_shortname !== 'undefined') {
            return;
        }
        window.disqus_shortname = 't-regx';
        window.disqus_identifier = '46dff8e37535ddb3571510672d1af48683bad013';
        window.disqus_title = 'Questions about T-Regx';
        window.disqus_url = 'http://localhost:3000/help';
        if (window.DISQUS === undefined) {
            const script = document.createElement('script');
            script.async = true;
            script.src = 'https://t-regx.disqus.com/embed.js';
            document.getElementsByTagName('head')[0].appendChild(script);
        } else {
            window.DISQUS.reset({reload: true});
        }
    })();
</script></div><div id="disqus_thread"></div></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '6d3eef6432e87213c7f031ee898b73a1',
                indexName: 't-regx',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>